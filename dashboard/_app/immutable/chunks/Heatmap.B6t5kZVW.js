import{s as ge,q as J,d as m,b as g,i as w,a as I,e as D,x as A,ab as Ae,k as L,ac as Le,H as qe,ad as Xe,B as ve,y as oe,U as p,c as W,j as Y,C as ee,D as Q,E as Z,I as Ge,ae as ht,af as Kt,f as ue,ag as Xt,ah as Qt,g as Ue,l as Oe,Q as pe,ai as Zt,m as dt,K as Jt,aj as xt,F as $t,J as we,L as Ne,a9 as mt,ak as ei,V as Pe,W as lt,P as ti,t as ii,u as li,v as ri,w as ni}from"./scheduler.cXSv0lVe.js";import{S as _e,i as be,d as te,t as P,f as Te,j as nt,a as R,m as ie,c as le,b as re,g as ae,e as fe,k as si}from"./index.DpaiaTSd.js";import{g as Fe,z as ye,at as st,u as Ie,au as qt,K as Gt,av as oi,k as de,P as gt,aw as ai,ax as _t,ay as He,az as fi,aA as ui,aB as ot,aC as at,aD as Ft,aE as ci,f as hi,aF as di,v as mi,t as it,J as gi,h as _i,j as bi,M as Ei,X as Vt,O as pi,Q as rt,R as yi,S as Oi,U as Ti}from"./VennDiagram.svelte_svelte_type_style_lang.GzCd6CPB.js";import{p as Ii}from"./stores.VHUHsHjd.js";function Ci(l,e){if(l.length===0||e.length===0)return{};const t=Object.keys(l[0]),i=Object.keys(e[0]),r={};for(const n of t)i.includes(n)&&(r[n]=n);return r}function Si(l,e,t){for(const i in t){const r=t[i];if(l[r]!==e[i])return!1}return!0}function vi(l,e){return i=>{if(!l.length)return i;const r=Ci(i,l),n=Object.keys(l[0]);return i.flatMap(a=>{const o=l.filter(h=>Si(a,h,r));if(o.length)return o.map(h=>({...a,...h}));const f=Object.fromEntries(n.filter(h=>a[h]==null).map(h=>[h,void 0]));return{...a,...f}})}}function wi(l){return t=>{const i=Di(l),r=[];for(const n in i){const s=i[n];let a;typeof s=="function"?a=s(t):Array.isArray(s)?a=s:a=Array.from(new Set(t.map(o=>o[n]))),r.push(a.map(o=>({[n]:o})))}return Ni(r)}}function Ni(l){function e(i,r,n){if(!n.length&&r!=null){i.push(r);return}const s=n[0],a=n.slice(1);for(const o of s)e(i,{...r,...o},a)}const t=[];return e(t,null,l),t}function Di(l){if(Array.isArray(l)){const e={};for(const t of l)e[t]=t;return e}else if(typeof l=="object")return l;return{[l]:l}}function Ai(l){return t=>{const i=[];for(const r of t){const n={...r};for(const s in l)n[s]==null&&(n[s]=l[s]);i.push(n)}return i}}function bt(l,e){return i=>{const r=wi(l)(i),n=vi(i)(r);return e?Ai(e)(n):n}}function Li(l){let e,t,i;return{c(){e=L("span"),t=Le("svg"),i=Le("path"),this.h()},l(r){e=D(r,"SPAN",{"aria-expanded":!0,class:!0});var n=A(e);t=Ae(n,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var s=A(t);i=Ae(s,"path",{fill:!0,"fill-rule":!0,d:!0}),A(i).forEach(m),s.forEach(m),n.forEach(m),this.h()},h(){g(i,"fill",l[3]),g(i,"fill-rule","evenodd"),g(i,"d","M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"),g(t,"viewBox","0 0 16 16"),g(t,"width",l[1]),g(t,"height",l[1]),g(t,"class","svelte-lqleyo"),g(e,"aria-expanded",l[0]),g(e,"class","svelte-lqleyo")},m(r,n){w(r,e,n),I(e,t),I(t,i)},p(r,[n]){n&8&&g(i,"fill",r[3]),n&2&&g(t,"width",r[1]),n&2&&g(t,"height",r[1]),n&1&&g(e,"aria-expanded",r[0])},i:J,o:J,d(r){r&&m(e)}}}function ki(l,e,t){let i,r,n=J,s=()=>(n(),n=qe(i,d=>t(3,r=d)),i);l.$$.on_destroy.push(()=>n());const{resolveColor:a}=Fe();let{toggled:o=!1}=e,{color:f="base-content"}=e,{size:h=10}=e;return l.$$set=d=>{"toggled"in d&&t(0,o=d.toggled),"color"in d&&t(4,f=d.color),"size"in d&&t(1,h=d.size)},l.$$.update=()=>{l.$$.dirty&16&&s(t(2,i=a(f)))},[o,h,i,r,f]}class Wt extends _e{constructor(e){super(),be(this,e,ki,Li,ge,{toggled:0,color:4,size:1})}}function Et(l,e,t){const i=l.slice();return i[12]=e[t],i[14]=t,i}function pt(l,e,t){const i=l.slice();return i[15]=e[t],i[17]=t,i}function yt(l,e,t){const i=l.slice();return i[15]=e[t],i}function Ot(l,e,t){const i=l.slice();return i[15]=e[t],i}function Tt(l){let e,t=l[15].id+"",i,r,n,s;return{c(){e=L("th"),i=Z(t),this.h()},l(a){e=D(a,"TH",{class:!0,style:!0,evidencetype:!0,evidencetypefidelity:!0});var o=A(e);i=Q(o,t),o.forEach(m),this.h()},h(){var a,o;g(e,"class",r="py-0 px-2 font-medium "+l[15].type+" svelte-ghf30y"),p(e,"width",l[6]+"%"),g(e,"evidencetype",n=((a=l[15].evidenceColumnType)==null?void 0:a.evidenceType)||"unavailable"),g(e,"evidencetypefidelity",s=((o=l[15].evidenceColumnType)==null?void 0:o.typeFidelity)||"unavailable")},m(a,o){w(a,e,o),I(e,i)},p(a,o){var f,h;o&8&&t!==(t=a[15].id+"")&&ee(i,t),o&8&&r!==(r="py-0 px-2 font-medium "+a[15].type+" svelte-ghf30y")&&g(e,"class",r),o&64&&p(e,"width",a[6]+"%"),o&8&&n!==(n=((f=a[15].evidenceColumnType)==null?void 0:f.evidenceType)||"unavailable")&&g(e,"evidencetype",n),o&8&&s!==(s=((h=a[15].evidenceColumnType)==null?void 0:h.typeFidelity)||"unavailable")&&g(e,"evidencetypefidelity",s)},d(a){a&&m(e)}}}function It(l){let e,t=l[15].type+"",i,r,n,s;return{c(){e=L("th"),i=Z(t),this.h()},l(a){e=D(a,"TH",{class:!0,style:!0,evidencetype:!0,evidencetypefidelity:!0});var o=A(e);i=Q(o,t),o.forEach(m),this.h()},h(){var a,o;g(e,"class",r=l[15].type+" type-indicator text-base-content-muted font-normal py-0 px-2 svelte-ghf30y"),p(e,"width",l[6]+"%"),g(e,"evidencetype",n=((a=l[15].evidenceColumnType)==null?void 0:a.evidenceType)||"unavailable"),g(e,"evidencetypefidelity",s=((o=l[15].evidenceColumnType)==null?void 0:o.typeFidelity)||"unavailable")},m(a,o){w(a,e,o),I(e,i)},p(a,o){var f,h;o&8&&t!==(t=a[15].type+"")&&ee(i,t),o&8&&r!==(r=a[15].type+" type-indicator text-base-content-muted font-normal py-0 px-2 svelte-ghf30y")&&g(e,"class",r),o&64&&p(e,"width",a[6]+"%"),o&8&&n!==(n=((f=a[15].evidenceColumnType)==null?void 0:f.evidenceType)||"unavailable")&&g(e,"evidencetype",n),o&8&&s!==(s=((h=a[15].evidenceColumnType)==null?void 0:h.typeFidelity)||"unavailable")&&g(e,"evidencetypefidelity",s)},d(a){a&&m(e)}}}function Ri(l){let e=(l[2]+l[14]+1).toLocaleString()+"",t;return{c(){t=Z(e)},l(i){t=Q(i,e)},m(i,r){w(i,t,r)},p(i,r){r&4&&e!==(e=(i[2]+i[14]+1).toLocaleString()+"")&&ee(t,e)},d(i){i&&m(t)}}}function Mi(l){let e=(l[2]+l[14]+1).toLocaleString()+"",t;return{c(){t=Z(e)},l(i){t=Q(i,e)},m(i,r){w(i,t,r)},p(i,r){r&4&&e!==(e=(i[2]+i[14]+1).toLocaleString()+"")&&ee(t,e)},d(i){i&&m(t)}}}function Ui(l){let e,t=(l[12][l[15].id]||"Ø")+"",i;return{c(){e=L("td"),i=Z(t),this.h()},l(r){e=D(r,"TD",{class:!0,style:!0});var n=A(e);i=Q(n,t),n.forEach(m),this.h()},h(){g(e,"class","other svelte-ghf30y"),p(e,"width",l[6]+"%")},m(r,n){w(r,e,n),I(e,i)},p(r,n){n&40&&t!==(t=(r[12][r[15].id]||"Ø")+"")&&ee(i,t),n&64&&p(e,"width",r[6]+"%")},d(r){r&&m(e)}}}function Pi(l){let e,t,i=(l[12][l[15].id]??"Ø")+"",r,n;return{c(){e=L("td"),t=L("div"),r=Z(i),this.h()},l(s){e=D(s,"TD",{class:!0,style:!0,title:!0});var a=A(e);t=D(a,"DIV",{class:!0});var o=A(t);r=Q(o,i),o.forEach(m),a.forEach(m),this.h()},h(){g(t,"class","svelte-ghf30y"),g(e,"class","boolean svelte-ghf30y"),p(e,"width",l[6]+"%"),g(e,"title",n=l[12][l[15].id])},m(s,a){w(s,e,a),I(e,t),I(t,r)},p(s,a){a&40&&i!==(i=(s[12][s[15].id]??"Ø")+"")&&ee(r,i),a&64&&p(e,"width",s[6]+"%"),a&40&&n!==(n=s[12][s[15].id])&&g(e,"title",n)},d(s){s&&m(e)}}}function Hi(l){let e,t,i=(l[12][l[15].id]||"Ø")+"",r,n;return{c(){e=L("td"),t=L("div"),r=Z(i),this.h()},l(s){e=D(s,"TD",{class:!0,style:!0,title:!0});var a=A(e);t=D(a,"DIV",{class:!0});var o=A(t);r=Q(o,i),o.forEach(m),a.forEach(m),this.h()},h(){g(t,"class","svelte-ghf30y"),g(e,"class","string svelte-ghf30y"),p(e,"width",l[6]+"%"),g(e,"title",n=l[12][l[15].id])},m(s,a){w(s,e,a),I(e,t),I(t,r)},p(s,a){a&40&&i!==(i=(s[12][s[15].id]||"Ø")+"")&&ee(r,i),a&64&&p(e,"width",s[6]+"%"),a&40&&n!==(n=s[12][s[15].id])&&g(e,"title",n)},d(s){s&&m(e)}}}function Bi(l){let e,t,i=de(l[12][l[15].id],l[3][l[17]].format,l[3][l[17]].columnUnitSummary)+"",r,n;return{c(){e=L("td"),t=L("div"),r=Z(i),this.h()},l(s){e=D(s,"TD",{class:!0,style:!0,title:!0});var a=A(e);t=D(a,"DIV",{class:!0});var o=A(t);r=Q(o,i),o.forEach(m),a.forEach(m),this.h()},h(){g(t,"class","svelte-ghf30y"),g(e,"class","string svelte-ghf30y"),p(e,"width",l[6]+"%"),g(e,"title",n=de(l[12][l[15].id],l[3][l[17]].format,l[3][l[17]].columnUnitSummary))},m(s,a){w(s,e,a),I(e,t),I(t,r)},p(s,a){a&40&&i!==(i=de(s[12][s[15].id],s[3][s[17]].format,s[3][s[17]].columnUnitSummary)+"")&&ee(r,i),a&64&&p(e,"width",s[6]+"%"),a&40&&n!==(n=de(s[12][s[15].id],s[3][s[17]].format,s[3][s[17]].columnUnitSummary))&&g(e,"title",n)},d(s){s&&m(e)}}}function qi(l){let e,t=de(l[12][l[15].id],l[3][l[17]].format,l[3][l[17]].columnUnitSummary)+"",i;return{c(){e=L("td"),i=Z(t),this.h()},l(r){e=D(r,"TD",{class:!0,style:!0});var n=A(e);i=Q(n,t),n.forEach(m),this.h()},h(){g(e,"class","number svelte-ghf30y"),p(e,"width",l[6]+"%")},m(r,n){w(r,e,n),I(e,i)},p(r,n){n&40&&t!==(t=de(r[12][r[15].id],r[3][r[17]].format,r[3][r[17]].columnUnitSummary)+"")&&ee(i,t),n&64&&p(e,"width",r[6]+"%")},d(r){r&&m(e)}}}function Gi(l){let e,t="Ø",i,r;return{c(){e=L("td"),i=Z(t),this.h()},l(n){e=D(n,"TD",{class:!0,style:!0});var s=A(e);i=Q(s,t),s.forEach(m),this.h()},h(){g(e,"class",r="text-base-content-muted "+l[3][l[17]].type+" svelte-ghf30y"),p(e,"width",l[6]+"%")},m(n,s){w(n,e,s),I(e,i)},p(n,s){s&8&&r!==(r="text-base-content-muted "+n[3][n[17]].type+" svelte-ghf30y")&&g(e,"class",r),s&64&&p(e,"width",n[6]+"%")},d(n){n&&m(e)}}}function Ct(l){let e;function t(n,s){return n[12][n[15].id]==null?Gi:n[3][n[17]].type==="number"?qi:n[3][n[17]].type==="date"?Bi:n[3][n[17]].type==="string"?Hi:n[3][n[17]].type==="boolean"?Pi:Ui}let i=t(l),r=i(l);return{c(){r.c(),e=ue()},l(n){r.l(n),e=ue()},m(n,s){r.m(n,s),w(n,e,s)},p(n,s){i===(i=t(n))&&r?r.p(n,s):(r.d(1),r=i(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&m(e),r.d(n)}}}function St(l){let e,t,i,r;function n(h,d){return h[14]===0?Mi:Ri}let a=n(l)(l),o=ye(l[3]),f=[];for(let h=0;h<o.length;h+=1)f[h]=Ct(pt(l,o,h));return{c(){e=L("tr"),t=L("td"),a.c(),i=Y();for(let h=0;h<f.length;h+=1)f[h].c();r=Y(),this.h()},l(h){e=D(h,"TR",{});var d=A(e);t=D(d,"TD",{class:!0,style:!0});var c=A(t);a.l(c),c.forEach(m),i=W(d);for(let y=0;y<f.length;y+=1)f[y].l(d);r=W(d),d.forEach(m),this.h()},h(){g(t,"class","index text-base-content-muted svelte-ghf30y"),p(t,"width","10%")},m(h,d){w(h,e,d),I(e,t),a.m(t,null),I(e,i);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(e,null);I(e,r)},p(h,d){if(a.p(h,d),d&104){o=ye(h[3]);let c;for(c=0;c<o.length;c+=1){const y=pt(h,o,c);f[c]?f[c].p(y,d):(f[c]=Ct(y),f[c].c(),f[c].m(e,r))}for(;c<f.length;c+=1)f[c].d(1);f.length=o.length}},d(h){h&&m(e),a.d(),Xe(f,h)}}}function vt(l){let e,t,i,r,n=(l[2]+Se).toLocaleString()+"",s,a,o=(l[4]+Se).toLocaleString()+"",f,h,d;return{c(){e=L("div"),t=L("input"),i=Y(),r=L("span"),s=Z(n),a=Z(" of "),f=Z(o),this.h()},l(c){e=D(c,"DIV",{class:!0});var y=A(e);t=D(y,"INPUT",{type:!0,max:!0,step:!0,class:!0}),i=W(y),r=D(y,"SPAN",{class:!0});var _=A(r);s=Q(_,n),a=Q(_," of "),f=Q(_,o),_.forEach(m),y.forEach(m),this.h()},h(){g(t,"type","range"),g(t,"max",l[4]),g(t,"step","1"),g(t,"class","slider bg-info/30 hover:bg-info/40 transition-colors svelte-ghf30y"),g(r,"class","text-xs svelte-ghf30y"),g(e,"class","pagination svelte-ghf30y")},m(c,y){w(c,e,y),I(e,t),ht(t,l[2]),I(e,i),I(e,r),I(r,s),I(r,a),I(r,f),h||(d=[oe(t,"change",l[9]),oe(t,"input",l[9]),oe(t,"input",l[7])],h=!0)},p(c,y){y&16&&g(t,"max",c[4]),y&4&&ht(t,c[2]),y&4&&n!==(n=(c[2]+Se).toLocaleString()+"")&&ee(s,n),y&16&&o!==(o=(c[4]+Se).toLocaleString()+"")&&ee(f,o)},d(c){c&&m(e),h=!1,Ge(d)}}}function Fi(l){let e,t,i,r,n,s,a,o,f,h,d,c,y,_,u,E,T,v,N,B,q,V,M,S,H,O,X=ye(l[3]),j=[];for(let C=0;C<X.length;C+=1)j[C]=Tt(Ot(l,X,C));let ce=ye(l[3]),x=[];for(let C=0;C<ce.length;C+=1)x[C]=It(yt(l,ce,C));let ne=ye(l[5]),G=[];for(let C=0;C<ne.length;C+=1)G[C]=St(Et(l,ne,C));let z=l[4]>0&&vt(l);return V=new st({props:{class:"download-button",data:l[1],queryID:l[0],display:!0}}),{c(){e=L("div"),t=L("div"),i=L("table"),r=L("thead"),n=L("tr"),s=L("th"),a=Y();for(let C=0;C<j.length;C+=1)j[C].c();o=Y(),f=L("tr"),h=Y(),d=L("tr"),c=L("th"),y=Y();for(let C=0;C<x.length;C+=1)x[C].c();_=Y(),u=L("tr"),E=Y(),T=L("tbody");for(let C=0;C<G.length;C+=1)G[C].c();N=Y(),z&&z.c(),B=Y(),q=L("div"),re(V.$$.fragment),this.h()},l(C){e=D(C,"DIV",{class:!0});var $=A(e);t=D($,"DIV",{class:!0});var F=A(t);i=D(F,"TABLE",{class:!0});var k=A(i);r=D(k,"THEAD",{});var K=A(r);n=D(K,"TR",{});var he=A(n);s=D(he,"TH",{class:!0,style:!0}),A(s).forEach(m),a=W(he);for(let se=0;se<j.length;se+=1)j[se].l(he);o=W(he),he.forEach(m),f=D(K,"TR",{}),A(f).forEach(m),h=W(K),d=D(K,"TR",{class:!0});var me=A(d);c=D(me,"TH",{class:!0,style:!0}),A(c).forEach(m),y=W(me);for(let se=0;se<x.length;se+=1)x[se].l(me);_=W(me),me.forEach(m),u=D(K,"TR",{}),A(u).forEach(m),K.forEach(m),E=W(k),T=D(k,"TBODY",{});var Ce=A(T);for(let se=0;se<G.length;se+=1)G[se].l(Ce);Ce.forEach(m),k.forEach(m),F.forEach(m),N=W($),z&&z.l($),B=W($),q=D($,"DIV",{class:!0});var U=A(q);le(V.$$.fragment,U),U.forEach(m),$.forEach(m),this.h()},h(){g(s,"class","py-0 px-2 font-medium index text-base-content-muted svelte-ghf30y"),p(s,"width","10%"),g(c,"class","py-0 px-2 index type-indicator text-base-content-muted font-normal svelte-ghf30y"),p(c,"width","10%"),g(d,"class","type-indicator svelte-ghf30y"),g(i,"class","text-xs svelte-ghf30y"),g(t,"class","scrollbox pretty-scrollbar svelte-ghf30y"),g(q,"class","footer svelte-ghf30y"),g(e,"class","results-pane py-1 svelte-ghf30y")},m(C,$){w(C,e,$),I(e,t),I(t,i),I(i,r),I(r,n),I(n,s),I(n,a);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(n,null);I(n,o),I(r,f),I(r,h),I(r,d),I(d,c),I(d,y);for(let F=0;F<x.length;F+=1)x[F]&&x[F].m(d,null);I(d,_),I(r,u),I(i,E),I(i,T);for(let F=0;F<G.length;F+=1)G[F]&&G[F].m(T,null);I(e,N),z&&z.m(e,null),I(e,B),I(e,q),ie(V,q,null),S=!0,H||(O=oe(T,"wheel",l[8]),H=!0)},p(C,[$]){if($&72){X=ye(C[3]);let k;for(k=0;k<X.length;k+=1){const K=Ot(C,X,k);j[k]?j[k].p(K,$):(j[k]=Tt(K),j[k].c(),j[k].m(n,o))}for(;k<j.length;k+=1)j[k].d(1);j.length=X.length}if($&72){ce=ye(C[3]);let k;for(k=0;k<ce.length;k+=1){const K=yt(C,ce,k);x[k]?x[k].p(K,$):(x[k]=It(K),x[k].c(),x[k].m(d,_))}for(;k<x.length;k+=1)x[k].d(1);x.length=ce.length}if($&108){ne=ye(C[5]);let k;for(k=0;k<ne.length;k+=1){const K=Et(C,ne,k);G[k]?G[k].p(K,$):(G[k]=St(K),G[k].c(),G[k].m(T,null))}for(;k<G.length;k+=1)G[k].d(1);G.length=ne.length}C[4]>0?z?z.p(C,$):(z=vt(C),z.c(),z.m(e,B)):z&&(z.d(1),z=null);const F={};$&2&&(F.data=C[1]),$&1&&(F.queryID=C[0]),V.$set(F)},i(C){S||(C&&(v||ve(()=>{v=nt(i,qt,{}),v.start()})),R(V.$$.fragment,C),C&&ve(()=>{S&&(M||(M=Te(e,Ie,{},!0)),M.run(1))}),S=!0)},o(C){P(V.$$.fragment,C),C&&(M||(M=Te(e,Ie,{},!1)),M.run(0)),S=!1},d(C){C&&m(e),Xe(j,C),Xe(x,C),Xe(G,C),z&&z.d(),te(V),C&&M&&M.end(),H=!1,O()}}}let Se=5;function Vi(l,e,t){let i,r,n,s,{queryID:a}=e,{data:o}=e,f=0,h;function d(){h=o.slice(f,f+Se),t(5,s=h)}const c=oi(u=>{t(2,f=Math.min(Math.max(0,f+Math.floor(u.deltaY/Math.abs(u.deltaY))),n)),d()},60);function y(u){if(Math.abs(u.deltaX)>=Math.abs(u.deltaY))return;const E=u.deltaY<0&&f===0,T=u.deltaY>0&&f===n;E||T||(u.preventDefault(),c(u))}function _(){f=Kt(this.value),t(2,f)}return l.$$set=u=>{"queryID"in u&&t(0,a=u.queryID),"data"in u&&t(1,o=u.data)},l.$$.update=()=>{l.$$.dirty&2&&t(3,i=Gt(o,"array")),l.$$.dirty&8&&t(6,r=90/(i.length+1)),l.$$.dirty&2&&t(4,n=Math.max(o.length-Se,0)),l.$$.dirty&6&&t(5,s=o.slice(f,f+Se))},[a,o,f,i,n,s,r,d,y,_]}class Wi extends _e{constructor(e){super(),be(this,e,Vi,Fi,ge,{queryID:0,data:1})}}const wt={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};function Yi(l){let e,t,i,r,n=gt.highlight(l[0],wt)+"",s;return{c(){e=L("pre"),t=Z("  "),i=L("code"),r=new Qt(!1),s=Z(`
`),this.h()},l(a){e=D(a,"PRE",{class:!0});var o=A(e);t=Q(o,"  "),i=D(o,"CODE",{class:!0});var f=A(i);r=Xt(f,!1),f.forEach(m),s=Q(o,`
`),o.forEach(m),this.h()},h(){r.a=null,g(i,"class","language-sql svelte-re3fhx"),g(e,"class","text-xs max-h-56 overflow-auto pretty-scrollbar")},m(a,o){w(a,e,o),I(e,t),I(e,i),r.m(n,i),I(e,s)},p(a,[o]){o&1&&n!==(n=gt.highlight(a[0],wt)+"")&&r.p(n)},i:J,o:J,d(a){a&&m(e)}}}function ji(l,e,t){let{code:i=""}=e;return l.$$set=r=>{"code"in r&&t(0,i=r.code)},[i]}class Yt extends _e{constructor(e){super(),be(this,e,ji,Yi,ge,{code:0})}}function zi(l){let e,t="Compiled",i,r,n="Written",s,a;return{c(){e=L("button"),e.textContent=t,i=Y(),r=L("button"),r.textContent=n,this.h()},l(o){e=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-1vzm9jy"&&(e.textContent=t),i=W(o),r=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-qu81ez"&&(r.textContent=n),this.h()},h(){g(e,"class","off svelte-ska6l4"),g(r,"class","text-info bg-info/10 border border-info svelte-ska6l4")},m(o,f){w(o,e,f),w(o,i,f),w(o,r,f),s||(a=oe(e,"click",l[1]),s=!0)},p:J,d(o){o&&(m(e),m(i),m(r)),s=!1,a()}}}function Ki(l){let e,t="Compiled",i,r,n="Written",s,a;return{c(){e=L("button"),e.textContent=t,i=Y(),r=L("button"),r.textContent=n,this.h()},l(o){e=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-wrfleh"&&(e.textContent=t),i=W(o),r=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-v36xno"&&(r.textContent=n),this.h()},h(){g(e,"class","text-info bg-info/10 border border-info svelte-ska6l4"),g(r,"class","off svelte-ska6l4")},m(o,f){w(o,e,f),w(o,i,f),w(o,r,f),s||(a=oe(r,"click",l[1]),s=!0)},p:J,d(o){o&&(m(e),m(i),m(r)),s=!1,a()}}}function Xi(l){let e,t,i;function r(a,o){return a[0]?Ki:zi}let n=r(l),s=n(l);return{c(){e=L("div"),s.c(),this.h()},l(a){e=D(a,"DIV",{class:!0});var o=A(e);s.l(o),o.forEach(m),this.h()},h(){g(e,"class","toggle svelte-ska6l4")},m(a,o){w(a,e,o),s.m(e,null),i=!0},p(a,[o]){n===(n=r(a))&&s?s.p(a,o):(s.d(1),s=n(a),s&&(s.c(),s.m(e,null)))},i(a){i||(a&&ve(()=>{i&&(t||(t=Te(e,Ie,{},!0)),t.run(1))}),i=!0)},o(a){a&&(t||(t=Te(e,Ie,{},!1)),t.run(0)),i=!1},d(a){a&&m(e),s.d(),a&&t&&t.end()}}}function Qi(l,e,t){let{showCompiled:i}=e;const r=function(){t(0,i=!i)};return l.$$set=n=>{"showCompiled"in n&&t(0,i=n.showCompiled)},[i,r]}class Zi extends _e{constructor(e){super(),be(this,e,Qi,Xi,ge,{showCompiled:0})}}function Nt(l){let e,t,i,r,n,s,a,o,f,h,d,c,y,_,u,E,T;r=new Wt({props:{toggled:l[10]}});let v=l[10]&&l[4]&&Dt(l),N=l[10]&&At(l);const B=[il,tl,el,$i],q=[];function V(S,H){return S[6]?0:S[8]?1:S[2].loading?2:3}d=V(l),c=q[d]=B[d](l);let M=l[8]>0&&!l[6]&&l[9]&&Lt(l);return{c(){e=L("div"),t=L("div"),i=L("button"),re(r.$$.fragment),n=Y(),s=Z(l[0]),a=Y(),v&&v.c(),o=Y(),N&&N.c(),f=Y(),h=L("button"),c.c(),y=Y(),M&&M.c(),this.h()},l(S){e=D(S,"DIV",{class:!0});var H=A(e);t=D(H,"DIV",{class:!0});var O=A(t);i=D(O,"BUTTON",{type:!0,"aria-label":!0,class:!0});var X=A(i);le(r.$$.fragment,X),n=W(X),s=Q(X,l[0]),X.forEach(m),a=W(O),v&&v.l(O),o=W(O),N&&N.l(O),O.forEach(m),f=W(H),h=D(H,"BUTTON",{type:!0,"aria-label":!0,class:!0});var j=A(h);c.l(j),j.forEach(m),y=W(H),M&&M.l(H),H.forEach(m),this.h()},h(){g(i,"type","button"),g(i,"aria-label","show-sql"),g(i,"class","title svelte-1ursthx"),g(t,"class","container-a svelte-1ursthx"),g(h,"type","button"),g(h,"aria-label","view-query"),g(h,"class",Zt("status-bar")+" svelte-1ursthx"),pe(h,"error",l[6]),pe(h,"success",!l[6]),pe(h,"open",l[9]),pe(h,"closed",!l[9]),g(e,"class","scrollbox my-3 svelte-1ursthx")},m(S,H){w(S,e,H),I(e,t),I(t,i),ie(r,i,null),I(i,n),I(i,s),I(t,a),v&&v.m(t,null),I(t,o),N&&N.m(t,null),I(e,f),I(e,h),q[d].m(h,null),I(e,y),M&&M.m(e,null),u=!0,E||(T=[oe(i,"click",l[15]),oe(h,"click",l[16])],E=!0)},p(S,H){const O={};H&1024&&(O.toggled=S[10]),r.$set(O),(!u||H&1)&&ee(s,S[0]),S[10]&&S[4]?v?(v.p(S,H),H&1040&&R(v,1)):(v=Dt(S),v.c(),R(v,1),v.m(t,o)):v&&(ae(),P(v,1,1,()=>{v=null}),fe()),S[10]?N?(N.p(S,H),H&1024&&R(N,1)):(N=At(S),N.c(),R(N,1),N.m(t,null)):N&&(ae(),P(N,1,1,()=>{N=null}),fe());let X=d;d=V(S),d===X?q[d].p(S,H):(ae(),P(q[X],1,1,()=>{q[X]=null}),fe(),c=q[d],c?c.p(S,H):(c=q[d]=B[d](S),c.c()),R(c,1),c.m(h,null)),(!u||H&64)&&pe(h,"error",S[6]),(!u||H&64)&&pe(h,"success",!S[6]),(!u||H&512)&&pe(h,"open",S[9]),(!u||H&512)&&pe(h,"closed",!S[9]),S[8]>0&&!S[6]&&S[9]?M?(M.p(S,H),H&832&&R(M,1)):(M=Lt(S),M.c(),R(M,1),M.m(e,null)):M&&(ae(),P(M,1,1,()=>{M=null}),fe())},i(S){u||(R(r.$$.fragment,S),R(v),R(N),R(c),R(M),S&&ve(()=>{u&&(_||(_=Te(e,Ie,{},!0)),_.run(1))}),u=!0)},o(S){P(r.$$.fragment,S),P(v),P(N),P(c),P(M),S&&(_||(_=Te(e,Ie,{},!1)),_.run(0)),u=!1},d(S){S&&m(e),te(r),v&&v.d(),N&&N.d(),q[d].d(),M&&M.d(),S&&_&&_.end(),E=!1,Ge(T)}}}function Dt(l){let e,t,i;function r(s){l[20](s)}let n={};return l[5]!==void 0&&(n.showCompiled=l[5]),e=new Zi({props:n}),Jt.push(()=>si(e,"showCompiled",r)),{c(){re(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,a){ie(e,s,a),i=!0},p(s,a){const o={};!t&&a&32&&(t=!0,o.showCompiled=s[5],xt(()=>t=!1)),e.$set(o)},i(s){i||(R(e.$$.fragment,s),i=!0)},o(s){P(e.$$.fragment,s),i=!1},d(s){te(e,s)}}}function At(l){let e,t,i,r,n;const s=[xi,Ji],a=[];function o(f,h){return f[5]?0:1}return t=o(l),i=a[t]=s[t](l),{c(){e=L("div"),i.c(),this.h()},l(f){e=D(f,"DIV",{class:!0});var h=A(e);i.l(h),h.forEach(m),this.h()},h(){g(e,"class","code-container svelte-1ursthx")},m(f,h){w(f,e,h),a[t].m(e,null),n=!0},p(f,h){let d=t;t=o(f),t===d?a[t].p(f,h):(ae(),P(a[d],1,1,()=>{a[d]=null}),fe(),i=a[t],i?i.p(f,h):(i=a[t]=s[t](f),i.c()),R(i,1),i.m(e,null))},i(f){n||(R(i),f&&ve(()=>{n&&(r||(r=Te(e,Ie,{},!0)),r.run(1))}),n=!0)},o(f){P(i),f&&(r||(r=Te(e,Ie,{},!1)),r.run(0)),n=!1},d(f){f&&m(e),a[t].d(),f&&r&&r.end()}}}function Ji(l){let e,t;return e=new Yt({props:{code:l[3]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r&8&&(n.code=i[3]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function xi(l){let e,t;return e=new Yt({props:{code:l[1].originalText}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r&2&&(n.code=i[1].originalText),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function $i(l){let e;return{c(){e=Z("ran successfully but no data was returned")},l(t){e=Q(t,"ran successfully but no data was returned")},m(t,i){w(t,e,i)},p:J,i:J,o:J,d(t){t&&m(e)}}}function el(l){let e;return{c(){e=Z("loading...")},l(t){e=Q(t,"loading...")},m(t,i){w(t,e,i)},p:J,i:J,o:J,d(t){t&&m(e)}}}function tl(l){let e,t,i=l[8].toLocaleString()+"",r,n,s=l[8]>1?"records":"record",a,o,f=l[7].toLocaleString()+"",h,d,c=l[7]>1?"properties":"property",y,_;return e=new Wt({props:{toggled:l[9],color:l[12].colors.info}}),{c(){re(e.$$.fragment),t=Y(),r=Z(i),n=Y(),a=Z(s),o=Z(" with "),h=Z(f),d=Y(),y=Z(c)},l(u){le(e.$$.fragment,u),t=W(u),r=Q(u,i),n=W(u),a=Q(u,s),o=Q(u," with "),h=Q(u,f),d=W(u),y=Q(u,c)},m(u,E){ie(e,u,E),w(u,t,E),w(u,r,E),w(u,n,E),w(u,a,E),w(u,o,E),w(u,h,E),w(u,d,E),w(u,y,E),_=!0},p(u,E){const T={};E&512&&(T.toggled=u[9]),E&4096&&(T.color=u[12].colors.info),e.$set(T),(!_||E&256)&&i!==(i=u[8].toLocaleString()+"")&&ee(r,i),(!_||E&256)&&s!==(s=u[8]>1?"records":"record")&&ee(a,s),(!_||E&128)&&f!==(f=u[7].toLocaleString()+"")&&ee(h,f),(!_||E&128)&&c!==(c=u[7]>1?"properties":"property")&&ee(y,c)},i(u){_||(R(e.$$.fragment,u),_=!0)},o(u){P(e.$$.fragment,u),_=!1},d(u){u&&(m(t),m(r),m(n),m(a),m(o),m(h),m(d),m(y)),te(e,u)}}}function il(l){let e=l[6].message+"",t;return{c(){t=Z(e)},l(i){t=Q(i,e)},m(i,r){w(i,t,r)},p(i,r){r&64&&e!==(e=i[6].message+"")&&ee(t,e)},i:J,o:J,d(i){i&&m(t)}}}function Lt(l){let e,t;return e=new Wi({props:{data:l[1],queryID:l[0]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r&2&&(n.data=i[1]),r&1&&(n.queryID=i[0]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ll(l){let e,t,i,r=l[11]&&Nt(l);return{c(){e=L("div"),r&&r.c(),this.h()},l(n){e=D(n,"DIV",{class:!0});var s=A(e);r&&r.l(s),s.forEach(m),this.h()},h(){g(e,"class","over-container svelte-1ursthx")},m(n,s){w(n,e,s),r&&r.m(e,null),i=!0},p(n,[s]){n[11]?r?(r.p(n,s),s&2048&&R(r,1)):(r=Nt(n),r.c(),R(r,1),r.m(e,null)):r&&(ae(),P(r,1,1,()=>{r=null}),fe())},i(n){i||(R(r),n&&(t||ve(()=>{t=nt(e,qt,{}),t.start()})),i=!0)},o(n){P(r),i=!1},d(n){n&&m(e),r&&r.d()}}}function rl(l,e,t){let i,r,n,s,a=J,o=()=>(a(),a=qe(u,O=>t(2,s=O)),u),f,h,d,c,y;Oe(l,Ii,O=>t(19,d=O)),Oe(l,ai,O=>t(11,c=O)),l.$$.on_destroy.push(()=>a());let{queryID:_}=e,{queryResult:u}=e;o();let E=_t("showSQL_".concat(_),!1);Oe(l,E,O=>t(10,h=O));let T=_t(`showResults_${_}`);Oe(l,T,O=>t(9,f=O));const v=function(){dt(E,h=!h,h)},N=function(){!M&&s.length>0&&dt(T,f=!f,f)};let B,q,V=!0,M;const{theme:S}=Fe();Oe(l,S,O=>t(12,y=O));function H(O){V=O,t(5,V)}return l.$$set=O=>{"queryID"in O&&t(0,_=O.queryID),"queryResult"in O&&o(t(1,u=O.queryResult))},l.$$.update=()=>{if(l.$$.dirty&524288&&t(18,i=d.data.evidencemeta.queries),l.$$.dirty&4&&(s?t(6,M=s.error):t(6,M=new Error("queryResult is undefined"))),l.$$.dirty&4&&t(8,r=(s==null?void 0:s.length)??0),l.$$.dirty&4&&t(7,n=s.columns.length??(s==null?void 0:s._evidenceColumnTypes.length)??0),l.$$.dirty&262145){let O=i==null?void 0:i.find(X=>X.id===_);O&&(t(3,B=O.inputQueryString),t(4,q=O.compiled&&O.compileError===void 0))}},[_,u,s,B,q,V,M,n,r,f,h,c,y,E,T,v,N,S,i,d,H]}class Xl extends _e{constructor(e){super(),be(this,e,rl,ll,ge,{queryID:0,queryResult:1})}}const ke=Symbol.for("__evidence-chart-window-debug__"),nl=(l,e)=>{window[ke]||(window[ke]={}),window[ke][l]=e},sl=l=>{window[ke]||(window[ke]={}),delete window[ke][l]},De=500,ol=(l,e)=>{var _;const t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)&&l.clientWidth*3*l.clientHeight*3>16777215;He("light",at),He("dark",Ft);let i;const r=()=>{i=ot(l,e.theme,{renderer:t?"svg":e.renderer??"canvas"})};r(),nl(i.id,i),e.connectGroup&&(i.group=e.connectGroup,fi(e.connectGroup));const n=()=>{if(e.seriesColors){const u=i.getOption();if(!u)return;const E={...u};for(const T of Object.keys(e.seriesColors)){const v=u.series.findIndex(N=>N.name===T);v!==-1&&(E.series[v]={...E.series[v],itemStyle:{...E.series[v].itemStyle,color:e.seriesColors[T]}})}i.setOption(E)}},s=()=>{e.echartsOptions&&i.setOption({...e.echartsOptions})},a=()=>{let u=[];if(e.seriesOptions){const E=e.config.series.reduce((T,{evidenceSeriesType:v},N)=>((v==="reference_line"||v==="reference_area"||v==="reference_point")&&T.push(N),T),[]);for(let T=0;T<e.config.series.length;T++)E.includes(T)?u.push({}):u.push({...e.seriesOptions});i.setOption({series:u})}};i.setOption({...e.config,animationDuration:De,animationDurationUpdate:De}),n(),s(),a();const o=e.dispatch;i.on("click",function(u){o("click",u)});const f=l.parentElement,h=ui(()=>{i.resize({animation:{duration:De}}),c()},100);let d;window.ResizeObserver&&f?(d=new ResizeObserver(h),d.observe(f)):window.addEventListener("resize",h);const c=()=>{if(e.showAllXAxisLabels){const u=i.getOption();if(!u)return;const E=new Set(u.series.flatMap(N=>{var B;return(B=N.data)==null?void 0:B.map(q=>q[0])})),T=4/5,v=(l==null?void 0:l.clientWidth)??0;if(!e.swapXY){const N={xAxis:{axisLabel:{interval:0,overflow:e.xAxisLabelOverflow,width:v*T/E.size}}};i.setOption(N)}}},y=u=>{u.theme!==e.theme&&(i.dispose(),e=u,r()),e=u,i.setOption({...e.config,animationDuration:De,animationDurationUpdate:De},!0),n(),s(),a(),i.resize({animation:{duration:De}}),c()};return h(),window[_=Symbol.for("chart renders")]??(window[_]=0),window[Symbol.for("chart renders")]++,{update(u){window[Symbol.for("chart renders")]++,y(u)},destroy(){d?d.unobserve(f):window.removeEventListener("resize",h),i.dispose(),sl(i.id)}}},al=(l,e)=>{He("light",at),He("dark",Ft),console.log("echartsCanvasDownloadAction",e.theme);const t=ot(l,e.theme,{renderer:"canvas"});e.config.animation=!1,t.setOption(e.config);const i=()=>{if(e.seriesColors){const f=t.getOption();if(!f)return;const h={...f};for(const d of Object.keys(e.seriesColors)){const c=f.series.findIndex(y=>y.name===d);c!==-1&&(h.series[c]={...h.series[c],itemStyle:{...h.series[c].itemStyle,color:e.seriesColors[d]}})}t.setOption(h)}},r=()=>{e.echartsOptions&&t.setOption({...e.echartsOptions})},n=()=>{let f=[];if(e.seriesOptions){const h=e.config.series.reduce((d,{evidenceSeriesType:c},y)=>((c==="reference_line"||c==="reference_area"||c==="reference_point")&&d.push(y),d),[]);for(let d=0;d<e.config.series.length;d++)h.includes(d)?f.push({}):f.push({...e.seriesOptions});t.setOption({series:f})}};r(),i(),n();let s=t.getConnectedDataURL({type:"png",pixelRatio:3,backgroundColor:e.backgroundColor,excludeComponents:["toolbox"]});const a=new Date,o=new Date(a.getTime()-a.getTimezoneOffset()*6e4).toISOString().slice(0,19).replaceAll(":","-");return ci(s,(e.evidenceChartTitle??e.queryID??"evidence-chart")+`_${o}.png`),t.dispose(),{destroy(){t.dispose()}}},Be=(l,e)=>{He("evidence-light",at);const{config:t,ratio:i,echartsOptions:r,seriesOptions:n,seriesColors:s,isMap:a,extraHeight:o,width:f}=e;let h={renderer:"canvas"};a&&(h.height=f*.5+o,l&&l.parentNode&&(l.style.height=h.height+"px",l.parentNode.style.height=h.height+"px"));const d=ot(l,"evidence-light",h);t.animation=!1,d.setOption(t),r&&d.setOption(r);const c=()=>{if(s){const E=d.getOption();if(!E)return;const T={...E};for(const v of Object.keys(s)){const N=E.series.findIndex(B=>B.name===v);N!==-1&&(T.series[N]={...T.series[N],itemStyle:{...T.series[N].itemStyle,color:s[v]}})}d.setOption(T)}},y=()=>{r&&d.setOption({...r})},_=()=>{let E=[];if(n){const T=t.series.reduce((v,{evidenceSeriesType:N},B)=>((N==="reference_line"||N==="reference_area"||N==="reference_point")&&v.push(B),v),[]);for(let v=0;v<t.series.length;v++)T.includes(v)?E.push({}):E.push({...n});d.setOption({series:E})}};y(),c(),_();let u=d.getConnectedDataURL({type:"jpeg",pixelRatio:i,backgroundColor:"#fff",excludeComponents:["toolbox"]});l.innerHTML=`<img src=${u} width="100%" style="
        position: absolute; 
        top: 0;
        user-select: all;
        -webkit-user-select: all;
        -moz-user-select: all;
        -ms-user-select: all;
    " />`,e.config.animation=!0};function fl(l){let e;function t(n,s){return n[9]?hl:cl}let i=t(l),r=i(l);return{c(){r.c(),e=ue()},l(n){r.l(n),e=ue()},m(n,s){r.m(n,s),w(n,e,s)},p(n,s){i===(i=t(n))&&r?r.p(n,s):(r.d(1),r=i(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&m(e),r.d(n)}}}function ul(l){let e,t,i,r;return{c(){e=L("div"),this.h()},l(n){e=D(n,"DIV",{class:!0,style:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","chart"),p(e,"height",l[1]),p(e,"width",l[2]),p(e,"margin-left","0"),p(e,"margin-top","15px"),p(e,"margin-bottom","10px"),p(e,"overflow","visible"),p(e,"break-inside","avoid")},m(n,s){w(n,e,s),i||(r=we(t=Be.call(null,e,{config:l[0],ratio:2,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[13]})),i=!0)},p(n,s){s&2&&p(e,"height",n[1]),s&4&&p(e,"width",n[2]),t&&Ne(t.update)&&s&8289&&t.update.call(null,{config:n[0],ratio:2,echartsOptions:n[5],seriesOptions:n[6],seriesColors:n[13]})},d(n){n&&m(e),i=!1,r()}}}function cl(l){let e,t,i,r,n,s,a;return{c(){e=L("div"),i=Y(),r=L("div"),this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0}),A(e).forEach(m),i=W(o),r=D(o,"DIV",{class:!0,style:!0}),A(r).forEach(m),this.h()},h(){g(e,"class","chart md:hidden"),p(e,"height",l[1]),p(e,"width","650px"),p(e,"margin-left","0"),p(e,"margin-top","15px"),p(e,"margin-bottom","10px"),p(e,"overflow","visible"),p(e,"break-inside","avoid"),g(r,"class","chart hidden md:block"),p(r,"height",l[1]),p(r,"width","841px"),p(r,"margin-left","0"),p(r,"margin-top","15px"),p(r,"margin-bottom","10px"),p(r,"overflow","visible"),p(r,"break-inside","avoid")},m(o,f){w(o,e,f),w(o,i,f),w(o,r,f),s||(a=[we(t=Be.call(null,e,{config:l[0],ratio:4,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[13],isMap:l[7],extraHeight:l[8],width:650})),we(n=Be.call(null,r,{config:l[0],ratio:4,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[13],isMap:l[7],extraHeight:l[8],width:841}))],s=!0)},p(o,f){f&2&&p(e,"height",o[1]),t&&Ne(t.update)&&f&8673&&t.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[13],isMap:o[7],extraHeight:o[8],width:650}),f&2&&p(r,"height",o[1]),n&&Ne(n.update)&&f&8673&&n.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[13],isMap:o[7],extraHeight:o[8],width:841})},d(o){o&&(m(e),m(i),m(r)),s=!1,Ge(a)}}}function hl(l){let e,t,i,r,n,s,a;return{c(){e=L("div"),i=Y(),r=L("div"),this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0}),A(e).forEach(m),i=W(o),r=D(o,"DIV",{class:!0,style:!0}),A(r).forEach(m),this.h()},h(){g(e,"class","chart md:hidden"),p(e,"height",l[1]),p(e,"width",l[11]+"px"),p(e,"margin-left","0"),p(e,"margin-top","15px"),p(e,"margin-bottom","10px"),p(e,"overflow","visible"),p(e,"break-inside","avoid"),g(r,"class","chart hidden md:block"),p(r,"height",l[1]),p(r,"width",l[10]+"px"),p(r,"margin-left","0"),p(r,"margin-top","15px"),p(r,"margin-bottom","10px"),p(r,"overflow","visible"),p(r,"break-inside","avoid")},m(o,f){w(o,e,f),w(o,i,f),w(o,r,f),s||(a=[we(t=Be.call(null,e,{config:l[0],ratio:4,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[13],isMap:l[7],extraHeight:l[8],width:l[11]})),we(n=Be.call(null,r,{config:l[0],ratio:4,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[13],isMap:l[7],extraHeight:l[8],width:l[10]}))],s=!0)},p(o,f){f&2&&p(e,"height",o[1]),f&2048&&p(e,"width",o[11]+"px"),t&&Ne(t.update)&&f&10721&&t.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[13],isMap:o[7],extraHeight:o[8],width:o[11]}),f&2&&p(r,"height",o[1]),f&1024&&p(r,"width",o[10]+"px"),n&&Ne(n.update)&&f&9697&&n.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[13],isMap:o[7],extraHeight:o[8],width:o[10]})},d(o){o&&(m(e),m(i),m(r)),s=!1,Ge(a)}}}function dl(l){let e;function t(n,s){if(n[3])return ul;if(n[4])return fl}let i=t(l),r=i&&i(l);return{c(){r&&r.c(),e=ue()},l(n){r&&r.l(n),e=ue()},m(n,s){r&&r.m(n,s),w(n,e,s)},p(n,[s]){i===(i=t(n))&&r?r.p(n,s):(r&&r.d(1),r=i&&i(n),r&&(r.c(),r.m(e.parentNode,e)))},i:J,o:J,d(n){n&&m(e),r&&r.d(n)}}}function ml(l,e,t){let i,r,n,s,a,o,f=J,h=()=>(f(),f=qe(i,O=>t(13,o=O)),i);l.$$.on_destroy.push(()=>f());const{resolveColorsObject:d}=Fe();let{config:c=void 0}=e,{height:y="291px"}=e,{width:_="100%"}=e,{copying:u=!1}=e,{printing:E=!1}=e,{echartsOptions:T=void 0}=e,{seriesOptions:v=void 0}=e,{seriesColors:N=void 0}=e,{isMap:B=!1}=e,{extraHeight:q=void 0}=e,V=!1,M,S;const H=$t("gridConfig");return H&&(V=!0,{cols:M,gapWidth:S}=H),l.$$set=O=>{"config"in O&&t(0,c=O.config),"height"in O&&t(1,y=O.height),"width"in O&&t(2,_=O.width),"copying"in O&&t(3,u=O.copying),"printing"in O&&t(4,E=O.printing),"echartsOptions"in O&&t(5,T=O.echartsOptions),"seriesOptions"in O&&t(6,v=O.seriesOptions),"seriesColors"in O&&t(14,N=O.seriesColors),"isMap"in O&&t(7,B=O.isMap),"extraHeight"in O&&t(8,q=O.extraHeight)},l.$$.update=()=>{l.$$.dirty&16384&&h(t(12,i=d(N))),l.$$.dirty&32768&&t(18,r=Math.min(Number(M),2)),l.$$.dirty&327680&&t(11,n=(650-Number(S)*(r-1))/r),l.$$.dirty&32768&&t(17,s=Math.min(Number(M),3)),l.$$.dirty&196608&&t(10,a=(841-Number(S)*(s-1))/s)},[c,y,_,u,E,T,v,B,q,V,a,n,i,o,N,M,S,s,r]}class gl extends _e{constructor(e){super(),be(this,e,ml,dl,ge,{config:0,height:1,width:2,copying:3,printing:4,echartsOptions:5,seriesOptions:6,seriesColors:14,isMap:7,extraHeight:8})}}function _l(l){let e,t,i="Loading...",r,n,s;return{c(){e=L("div"),t=L("span"),t.textContent=i,r=Y(),n=L("div"),this.h()},l(a){e=D(a,"DIV",{role:!0,class:!0});var o=A(e);t=D(o,"SPAN",{class:!0,"data-svelte-h":!0}),Ue(t)!=="svelte-1wtojot"&&(t.textContent=i),r=W(o),n=D(o,"DIV",{class:!0,style:!0}),A(n).forEach(m),o.forEach(m),this.h()},h(){g(t,"class","sr-only"),g(n,"class","bg-base-100 rounded-md max-w-[100%]"),p(n,"height",l[0]),p(n,"margin-top","15px"),p(n,"margin-bottom","31px"),g(e,"role","status"),g(e,"class","animate-pulse")},m(a,o){w(a,e,o),I(e,t),I(e,r),I(e,n)},p(a,[o]){o&1&&p(n,"height",a[0])},i(a){a&&(s||ve(()=>{s=nt(e,hi,{}),s.start()}))},o:J,d(a){a&&m(e)}}}function bl(l,e,t){let{height:i="231px"}=e;return l.$$set=r=>{"height"in r&&t(0,i=r.height)},[i]}class El extends _e{constructor(e){super(),be(this,e,bl,_l,ge,{height:0})}}function kt(l){let e,t,i,r;const n=[yl,pl],s=[];function a(o,f){return 1}return e=a(),t=s[e]=n[e](l),{c(){t.c(),i=ue()},l(o){t.l(o),i=ue()},m(o,f){s[e].m(o,f),w(o,i,f),r=!0},p(o,f){t.p(o,f)},i(o){r||(R(t),r=!0)},o(o){P(t),r=!1},d(o){o&&m(i),s[e].d(o)}}}function pl(l){let e,t,i,r;return{c(){e=L("div"),this.h()},l(n){e=D(n,"DIV",{class:!0,style:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","chart svelte-db4qxn"),p(e,"height",l[3]),p(e,"width",l[4]),p(e,"overflow","visible"),p(e,"display",l[15]?"none":"inherit")},m(n,s){w(n,e,s),i||(r=we(t=ol.call(null,e,{config:l[0],...l[25],echartsOptions:l[9],seriesOptions:l[10],dispatch:l[24],renderer:l[6],connectGroup:l[12],xAxisLabelOverflow:l[13],seriesColors:l[19],theme:l[20]})),i=!0)},p(n,s){s[0]&8&&p(e,"height",n[3]),s[0]&16&&p(e,"width",n[4]),s[0]&32768&&p(e,"display",n[15]?"none":"inherit"),t&&Ne(t.update)&&s[0]&35141185&&t.update.call(null,{config:n[0],...n[25],echartsOptions:n[9],seriesOptions:n[10],dispatch:n[24],renderer:n[6],connectGroup:n[12],xAxisLabelOverflow:n[13],seriesColors:n[19],theme:n[20]})},i:J,o:J,d(n){n&&m(e),i=!1,r()}}}function yl(l){let e,t;return e=new El({props:{height:l[3]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&8&&(n.height=i[3]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Rt(l){let e,t,i,r=l[8]&&Mt(l),n=l[5]&&l[7]&&Ut(l);return{c(){e=L("div"),r&&r.c(),t=Y(),n&&n.c(),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=A(e);r&&r.l(a),t=W(a),n&&n.l(a),a.forEach(m),this.h()},h(){g(e,"class","chart-footer svelte-db4qxn")},m(s,a){w(s,e,a),r&&r.m(e,null),I(e,t),n&&n.m(e,null),i=!0},p(s,a){s[8]?r?(r.p(s,a),a[0]&256&&R(r,1)):(r=Mt(s),r.c(),R(r,1),r.m(e,t)):r&&(ae(),P(r,1,1,()=>{r=null}),fe()),s[5]&&s[7]?n?(n.p(s,a),a[0]&160&&R(n,1)):(n=Ut(s),n.c(),R(n,1),n.m(e,null)):n&&(ae(),P(n,1,1,()=>{n=null}),fe())},i(s){i||(R(r),R(n),i=!0)},o(s){P(r),P(n),i=!1},d(s){s&&m(e),r&&r.d(),n&&n.d()}}}function Mt(l){let e,t;return e=new st({props:{text:"Save Image",class:"download-button",downloadData:l[32],display:l[17],queryID:l[1],$$slots:{default:[Ol]},$$scope:{ctx:l}}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&16384&&(n.downloadData=i[32]),r[0]&131072&&(n.display=i[17]),r[0]&2&&(n.queryID=i[1]),r[1]&32&&(n.$$scope={dirty:r,ctx:i}),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Ol(l){let e,t,i,r;return{c(){e=Le("svg"),t=Le("rect"),i=Le("circle"),r=Le("path"),this.h()},l(n){e=Ae(n,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=A(e);t=Ae(s,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),A(t).forEach(m),i=Ae(s,"circle",{cx:!0,cy:!0,r:!0}),A(i).forEach(m),r=Ae(s,"path",{d:!0}),A(r).forEach(m),s.forEach(m),this.h()},h(){g(t,"x","3"),g(t,"y","3"),g(t,"width","18"),g(t,"height","18"),g(t,"rx","2"),g(i,"cx","8.5"),g(i,"cy","8.5"),g(i,"r","1.5"),g(r,"d","M20.4 14.5L16 10 4 20"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","12"),g(e,"height","12"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","#000"),g(e,"stroke-width","2"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(n,s){w(n,e,s),I(e,t),I(e,i),I(e,r)},p:J,d(n){n&&m(e)}}}function Ut(l){let e,t;return e=new st({props:{text:"Download Data",data:l[5],queryID:l[1],class:"download-button",display:l[17]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&32&&(n.data=i[5]),r[0]&2&&(n.queryID=i[1]),r[0]&131072&&(n.display=i[17]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Pt(l){let e,t;return e=new di({props:{source:JSON.stringify(l[0],void 0,3),copyToClipboard:!0,$$slots:{default:[Tl]},$$scope:{ctx:l}}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&1&&(n.source=JSON.stringify(i[0],void 0,3)),r[0]&1|r[1]&32&&(n.$$scope={dirty:r,ctx:i}),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Tl(l){let e=JSON.stringify(l[0],void 0,3)+"",t;return{c(){t=Z(e)},l(i){t=Q(i,e)},m(i,r){w(i,t,r)},p(i,r){r[0]&1&&e!==(e=JSON.stringify(i[0],void 0,3)+"")&&ee(t,e)},d(i){i&&m(t)}}}function Ht(l){let e,t,i,r;return{c(){e=L("div"),this.h()},l(n){e=D(n,"DIV",{class:!0,style:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","chart svelte-db4qxn"),p(e,"display","none"),p(e,"visibility","visible"),p(e,"height",l[3]),p(e,"width","666px"),p(e,"margin-left","0"),p(e,"margin-top","15px"),p(e,"margin-bottom","15px"),p(e,"overflow","visible")},m(n,s){w(n,e,s),i||(r=we(t=al.call(null,e,{config:l[0],...l[25],echartsOptions:l[9],seriesOptions:l[10],seriesColors:l[19],queryID:l[1],evidenceChartTitle:l[2],theme:l[20],backgroundColor:l[21].colors["base-100"]})),i=!0)},p(n,s){s[0]&8&&p(e,"height",n[3]),t&&Ne(t.update)&&s[0]&37225991&&t.update.call(null,{config:n[0],...n[25],echartsOptions:n[9],seriesOptions:n[10],seriesColors:n[19],queryID:n[1],evidenceChartTitle:n[2],theme:n[20],backgroundColor:n[21].colors["base-100"]})},d(n){n&&m(e),i=!1,r()}}}function Il(l){let e,t,i,r,n,s,a,o,f,h,d=!l[16]&&kt(l);i=new gl({props:{config:l[0],height:l[3],width:l[4],copying:l[15],printing:l[16],echartsOptions:l[9],seriesOptions:l[10],seriesColors:l[18]}});let c=(l[7]||l[8])&&Rt(l),y=l[11]&&!l[16]&&Pt(l),_=l[14]&&Ht(l);return{c(){e=L("div"),d&&d.c(),t=Y(),re(i.$$.fragment),r=Y(),c&&c.c(),n=Y(),y&&y.c(),s=Y(),_&&_.c(),a=ue(),this.h()},l(u){e=D(u,"DIV",{role:!0,class:!0});var E=A(e);d&&d.l(E),t=W(E),le(i.$$.fragment,E),r=W(E),c&&c.l(E),n=W(E),y&&y.l(E),E.forEach(m),s=W(u),_&&_.l(u),a=ue(),this.h()},h(){g(e,"role","none"),g(e,"class","chart-container mt-2 mb-3 svelte-db4qxn")},m(u,E){w(u,e,E),d&&d.m(e,null),I(e,t),ie(i,e,null),I(e,r),c&&c.m(e,null),I(e,n),y&&y.m(e,null),w(u,s,E),_&&_.m(u,E),w(u,a,E),o=!0,f||(h=[oe(window,"copy",l[27]),oe(window,"beforeprint",l[28]),oe(window,"afterprint",l[29]),oe(window,"export-beforeprint",l[30]),oe(window,"export-afterprint",l[31]),oe(e,"mouseenter",l[33]),oe(e,"mouseleave",l[34])],f=!0)},p(u,E){u[16]?d&&(ae(),P(d,1,1,()=>{d=null}),fe()):d?(d.p(u,E),E[0]&65536&&R(d,1)):(d=kt(u),d.c(),R(d,1),d.m(e,t));const T={};E[0]&1&&(T.config=u[0]),E[0]&8&&(T.height=u[3]),E[0]&16&&(T.width=u[4]),E[0]&32768&&(T.copying=u[15]),E[0]&65536&&(T.printing=u[16]),E[0]&512&&(T.echartsOptions=u[9]),E[0]&1024&&(T.seriesOptions=u[10]),E[0]&262144&&(T.seriesColors=u[18]),i.$set(T),u[7]||u[8]?c?(c.p(u,E),E[0]&384&&R(c,1)):(c=Rt(u),c.c(),R(c,1),c.m(e,n)):c&&(ae(),P(c,1,1,()=>{c=null}),fe()),u[11]&&!u[16]?y?(y.p(u,E),E[0]&67584&&R(y,1)):(y=Pt(u),y.c(),R(y,1),y.m(e,null)):y&&(ae(),P(y,1,1,()=>{y=null}),fe()),u[14]?_?_.p(u,E):(_=Ht(u),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(u){o||(R(d),R(i.$$.fragment,u),R(c),R(y),o=!0)},o(u){P(d),P(i.$$.fragment,u),P(c),P(y),o=!1},d(u){u&&(m(e),m(s),m(a)),d&&d.d(),te(i),c&&c.d(),y&&y.d(),_&&_.d(u),f=!1,Ge(h)}}}function Cl(l,e,t){let i;const r=["config","queryID","evidenceChartTitle","height","width","data","renderer","downloadableData","downloadableImage","echartsOptions","seriesOptions","printEchartsConfig","seriesColors","connectGroup","xAxisLabelOverflow"];let n=mt(e,r),s,a=J,o=()=>(a(),a=qe(i,U=>t(19,s=U)),i),f,h;l.$$.on_destroy.push(()=>a());const{activeAppearance:d,theme:c,resolveColorsObject:y}=Fe();Oe(l,d,U=>t(20,f=U)),Oe(l,c,U=>t(21,h=U));let{config:_=void 0}=e,{queryID:u=void 0}=e,{evidenceChartTitle:E=void 0}=e,{height:T="291px"}=e,{width:v="100%"}=e,{data:N}=e,{renderer:B=void 0}=e,{downloadableData:q=void 0}=e,{downloadableImage:V=void 0}=e,{echartsOptions:M=void 0}=e,{seriesOptions:S=void 0}=e,{printEchartsConfig:H}=e,{seriesColors:O=void 0}=e,{connectGroup:X=void 0}=e,{xAxisLabelOverflow:j=void 0}=e;const ce=ei();let x=!1,ne=!1,G=!1,z=!1;const C=()=>{t(15,ne=!0),ti(),setTimeout(()=>{t(15,ne=!1)},0)},$=()=>t(16,G=!0),F=()=>t(16,G=!1),k=()=>t(16,G=!0),K=()=>t(16,G=!1),he=()=>{t(14,x=!0),setTimeout(()=>{t(14,x=!1)},0)},me=()=>t(17,z=!0),Ce=()=>t(17,z=!1);return l.$$set=U=>{e=Pe(Pe({},e),lt(U)),t(25,n=mt(e,r)),"config"in U&&t(0,_=U.config),"queryID"in U&&t(1,u=U.queryID),"evidenceChartTitle"in U&&t(2,E=U.evidenceChartTitle),"height"in U&&t(3,T=U.height),"width"in U&&t(4,v=U.width),"data"in U&&t(5,N=U.data),"renderer"in U&&t(6,B=U.renderer),"downloadableData"in U&&t(7,q=U.downloadableData),"downloadableImage"in U&&t(8,V=U.downloadableImage),"echartsOptions"in U&&t(9,M=U.echartsOptions),"seriesOptions"in U&&t(10,S=U.seriesOptions),"printEchartsConfig"in U&&t(11,H=U.printEchartsConfig),"seriesColors"in U&&t(26,O=U.seriesColors),"connectGroup"in U&&t(12,X=U.connectGroup),"xAxisLabelOverflow"in U&&t(13,j=U.xAxisLabelOverflow)},l.$$.update=()=>{l.$$.dirty[0]&67108864&&o(t(18,i=y(O)))},[_,u,E,T,v,N,B,q,V,M,S,H,X,j,x,ne,G,z,i,s,f,h,d,c,ce,n,O,C,$,F,k,K,he,me,Ce]}class Sl extends _e{constructor(e){super(),be(this,e,Cl,Il,ge,{config:0,queryID:1,evidenceChartTitle:2,height:3,width:4,data:5,renderer:6,downloadableData:7,downloadableImage:8,echartsOptions:9,seriesOptions:10,printEchartsConfig:11,seriesColors:26,connectGroup:12,xAxisLabelOverflow:13},null,[-1,-1])}}function Qe(l,e){const t=new Set(l.map(i=>i[e]));return Array.from(t)}function vl(l){let e=[];for(let t=1;t<l.length;t++)e.push(l[t]-l[t-1]);return e}function jt(l,e){return(typeof l!="number"||isNaN(l))&&(l=0),(typeof e!="number"||isNaN(e))&&(e=0),l=Math.abs(l),e=Math.abs(e),e<=.01?l:jt(e,l%e)}function wl(l,e){if(!Array.isArray(l))throw new TypeError("Cannot calculate extent of non-array value.");let t,i;for(const r of l)typeof r=="number"&&(t===void 0?r>=r&&(t=i=r):(t>r&&(t=r),i<r&&(i=r)));return[t,i]}function Nl(l,e){let[t,i]=wl(l);const r=[];let n=t;for(;n<=i;)r.push(Math.round((n+Number.EPSILON)*1e8)/1e8),n+=e;return r}function Dl(l){if(l.length<=1)return;l.sort(function(t,i){return t-i}),l=l.map(function(t){return t*1e8}),l=vl(l);let e=l.reduce((t,i)=>jt(t,i))/1e8;return e=Math.round((e+Number.EPSILON)*1e8)/1e8,e}function Al(l,e,t,i,r=!1,n=!1){var y;let s=!1;const a=l.map(_=>Object.assign({},_,{[e]:_[e]instanceof Date?(s=!0,_[e].toISOString()):_[e]})).filter(_=>_[e]!==void 0&&_[e]!==null),o=Array.from(a).reduce((_,u)=>(u[e]instanceof Date&&(u[e]=u[e].toISOString(),s=!0),i?(_[u[i]??"null"]||(_[u[i]??"null"]=[]),_[u[i]??"null"].push(u)):(_.default||(_.default=[]),_.default.push(u)),_),{}),f={};let h;const d=((y=a.find(_=>_&&_[e]!==null&&_[e]!==void 0))==null?void 0:y[e])??null;switch(typeof d){case"object":throw d===null?new Error(`Column '${e}' is entirely null. Column must contain at least one non-null value.`):new Error("Unexpected object property, expected string, date, or number");case"number":if(h=Qe(a,e),n){const _=Dl(h);f[e]=Nl(h,_)}break;case"string":h=Qe(a,e),f[e]=h;break}const c=[];for(const _ of Object.values(o)){const u=i?{[i]:null}:{};if(r)if(t instanceof Array)for(let T=0;T<t.length;T++)u[t[T]]=0;else u[t]=0;else if(t instanceof Array)for(let T=0;T<t.length;T++)u[t[T]]=null;else u[t]=null;i&&(f[i]=i);const E=[];Object.keys(f).length===0?E.push(bt([e],u)):E.push(bt(f,u)),c.push(mi(_,...E))}return s?c.flat().map(_=>({..._,[e]:new Date(_[e])})):c.flat()}function Bt(l,e,t,i="asc"){let r=[...l];e!==t&&t&&r.sort((s,a)=>{const o=s[t],f=a[t];return o===void 0?1:f===void 0?-1:(o<f?-1:o>f?1:0)*(i==="asc"?1:-1)});let n=[...new Set(r.map(s=>s[e]).filter(s=>s!==void 0))];return e===t&&n.sort((s,a)=>(s<a?-1:s>a?1:0)*(i==="asc"?1:-1)),n}function Ll(l){let e,t;return e=new Sl({props:{data:l[0],queryID:l[4],config:l[11],height:l[12],echartsOptions:l[6],seriesOptions:l[7],printEchartsConfig:l[1],evidenceChartTitle:l[5],renderer:l[8],downloadableData:l[2],downloadableImage:l[3],connectGroup:l[9]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&1&&(n.data=i[0]),r[0]&16&&(n.queryID=i[4]),r[0]&2048&&(n.config=i[11]),r[0]&4096&&(n.height=i[12]),r[0]&64&&(n.echartsOptions=i[6]),r[0]&128&&(n.seriesOptions=i[7]),r[0]&2&&(n.printEchartsConfig=i[1]),r[0]&32&&(n.evidenceChartTitle=i[5]),r[0]&256&&(n.renderer=i[8]),r[0]&4&&(n.downloadableData=i[2]),r[0]&8&&(n.downloadableImage=i[3]),r[0]&512&&(n.connectGroup=i[9]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function kl(l){let e,t;return e=new Vt({props:{title:"Heatmap",error:l[10]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r[0]&1024&&(n.error=i[10]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Rl(l){let e,t,i,r;const n=[kl,Ll],s=[];function a(o,f){return o[10]?0:1}return e=a(l),t=s[e]=n[e](l),{c(){t.c(),i=ue()},l(o){t.l(o),i=ue()},m(o,f){s[e].m(o,f),w(o,i,f),r=!0},p(o,f){let h=e;e=a(o),e===h?s[e].p(o,f):(ae(),P(s[h],1,1,()=>{s[h]=null}),fe(),t=s[e],t?t.p(o,f):(t=s[e]=n[e](o),t.c()),R(t,1),t.m(i.parentNode,i))},i(o){r||(R(t),r=!0)},o(o){P(t),r=!1},d(o){o&&m(i),s[e].d(o)}}}function Ml(l,e,t,i){return l.map(r=>[`${r[e]}`,`${r[t]}`,r[i]])}function Ul(l,e,t){let i,r,n,s,a,o=J,f=()=>(o(),o=qe(i,b=>t(53,a=b)),i);l.$$.on_destroy.push(()=>o());const{theme:h,resolveColorScale:d}=Fe();Oe(l,h,b=>t(52,s=b));let{data:c}=e,{queryID:y}=e,{x:_}=e,{y:u}=e,{xSort:E=void 0}=e,{xSortOrder:T="asc"}=e,{ySort:v=void 0}=e,{ySortOrder:N="asc"}=e,{value:B}=e,{valueFmt:q}=e,{valueLabels:V=!0}=e,{mobileValueLabels:M=!1}=e,{xAxisPosition:S="top"}=e,{xTickMarks:H=!1}=e,{yTickMarks:O=!1}=e,{title:X=void 0}=e,{subtitle:j=void 0}=e,ce=X!==void 0,x=j!==void 0,{borders:ne=!0}=e,{legend:G=!0}=e,{filter:z=!1}=e,{colorPalette:C=void 0}=e,{colorScale:$=void 0}=e,{min:F=void 0}=e,{max:k=void 0}=e,{chartAreaHeight:K=void 0}=e,{xLabelRotation:he=void 0}=e,{echartsOptions:me=void 0}=e,{seriesOptions:Ce=void 0}=e,{printEchartsConfig:U=!1}=e,{leftPadding:se=0}=e,{rightPadding:Ze=2}=e,{cellHeight:Je=30}=e,{renderer:ft=void 0}=e,{downloadableData:Ve=!0}=e,{downloadableImage:We=!0}=e,{connectGroup:ut=void 0}=e,{nullsZero:Re=!0}=e,{zeroDisplay:Ye="—"}=e,xe,je,$e,et,Ee,Me,tt,ze,Ke,ct;return l.$$set=b=>{"data"in b&&t(0,c=b.data),"queryID"in b&&t(4,y=b.queryID),"x"in b&&t(26,_=b.x),"y"in b&&t(27,u=b.y),"xSort"in b&&t(28,E=b.xSort),"xSortOrder"in b&&t(29,T=b.xSortOrder),"ySort"in b&&t(30,v=b.ySort),"ySortOrder"in b&&t(31,N=b.ySortOrder),"value"in b&&t(32,B=b.value),"valueFmt"in b&&t(33,q=b.valueFmt),"valueLabels"in b&&t(15,V=b.valueLabels),"mobileValueLabels"in b&&t(16,M=b.mobileValueLabels),"xAxisPosition"in b&&t(34,S=b.xAxisPosition),"xTickMarks"in b&&t(17,H=b.xTickMarks),"yTickMarks"in b&&t(18,O=b.yTickMarks),"title"in b&&t(5,X=b.title),"subtitle"in b&&t(35,j=b.subtitle),"borders"in b&&t(19,ne=b.borders),"legend"in b&&t(20,G=b.legend),"filter"in b&&t(21,z=b.filter),"colorPalette"in b&&t(36,C=b.colorPalette),"colorScale"in b&&t(37,$=b.colorScale),"min"in b&&t(22,F=b.min),"max"in b&&t(23,k=b.max),"chartAreaHeight"in b&&t(24,K=b.chartAreaHeight),"xLabelRotation"in b&&t(38,he=b.xLabelRotation),"echartsOptions"in b&&t(6,me=b.echartsOptions),"seriesOptions"in b&&t(7,Ce=b.seriesOptions),"printEchartsConfig"in b&&t(1,U=b.printEchartsConfig),"leftPadding"in b&&t(39,se=b.leftPadding),"rightPadding"in b&&t(40,Ze=b.rightPadding),"cellHeight"in b&&t(41,Je=b.cellHeight),"renderer"in b&&t(8,ft=b.renderer),"downloadableData"in b&&t(2,Ve=b.downloadableData),"downloadableImage"in b&&t(3,We=b.downloadableImage),"connectGroup"in b&&t(9,ut=b.connectGroup),"nullsZero"in b&&t(25,Re=b.nullsZero),"zeroDisplay"in b&&t(42,Ye=b.zeroDisplay)},l.$$.update=()=>{if(l.$$.dirty[0]&32768&&t(15,V=V==="true"||V===!0),l.$$.dirty[0]&65536&&t(16,M=M==="true"||M===!0),l.$$.dirty[0]&131072&&t(17,H=H==="true"||H===!0),l.$$.dirty[0]&262144&&t(18,O=O==="true"||O===!0),l.$$.dirty[0]&524288&&t(19,ne=ne==="true"||ne===!0),l.$$.dirty[0]&1048576&&t(20,G=G==="true"||G===!0),l.$$.dirty[0]&2097152&&t(21,z=z==="true"||z===!0),l.$$.dirty[1]&96&&f(t(13,i=d($??C??"default"))),l.$$.dirty[0]&2&&t(1,U=U==="true"||U===!0),l.$$.dirty[0]&4&&t(2,Ve=it(Ve)),l.$$.dirty[0]&8&&t(3,We=it(We)),l.$$.dirty[0]&33554432&&t(25,Re=it(Re)),l.$$.dirty[0]&2147451937|l.$$.dirty[1]&8388511)try{if(gi(c,[_,u,B]),t(0,c=Al(c,_,B,u,Re)),F&&(t(22,F=Number(F)),isNaN(F)))throw Error("min must be a number");if(k&&(t(23,k=Number(k)),isNaN(k)))throw Error("max must be a number");if(t(49,ze=F??Math.min(...c.map(b=>b[B]))),t(50,Ke=k??Math.max(...c.map(b=>b[B]))),t(43,xe=E?Bt(c,_,E,T):Qe(c,_)),t(44,je=v?Bt(c,u,v,N):Qe(c,u)),t(45,$e=Ml(c,_,u,B)),t(48,Me=Gt(c)),Me[_].type==="date"||Me[u].type==="date")throw Error("Heatmap can only accept string or numeric columns for x and y. If you would like to show dates, cast them to strings in your SQL query before using in the Heatmap.");if(t(46,et=Me[B].format),t(47,Ee=q?_i(q):et),K){if(t(24,K=Number(K)),isNaN(K))throw Error("chartAreaHeight must be a number");if(K<=0)throw Error("chartAreaHeight must be a positive number")}t(51,n=K??Math.max(100,je.length*Je)),t(12,r=`${20+G*35+ce*18+x*18+n}px`),t(11,ct={textStyle:{fontFamily:"sans-serif"},title:{text:X,subtext:j},animation:!1,grid:{height:n,top:ce*20+x*20+8,left:se,right:Ze},xAxis:{type:"category",data:xe,splitArea:{show:!0},axisTick:{show:H,alignWithLabel:!1},axisLabel:{interval:0,hideOverlap:!0,rotate:he},position:S},yAxis:{type:"category",inverse:!0,data:je,splitArea:{show:!0},axisTick:{show:O,alignWithLabel:!1}},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,confine:!0,axisPointer:{type:"shadow"},formatter(b){return`
					<span id="tooltip" style='font-weight: 600;'>${b.value[1]}</span>
						<br/>
					<span id="tooltip" style='font-weight: 600;'>${b.name}</span>
						<br/>
						<span>${bi(B,Ee)}: </span>
							<span style='float:right; margin-left: 10px;'>${b.value[2]===0?Ye:de(Number.isNaN(b.value[2])?0:b.value[2],Ee)}</span>`},padding:6,borderRadius:4,borderWidth:1,borderColor:s.colors["base-300"],backgroundColor:s.colors["base-100"],extraCssText:"box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1;",textStyle:{color:s.colors["base-content"],fontSize:12,fontWeight:400},order:"valueDesc"},visualMap:{itemWidth:10,show:G,min:ze,max:Ke,calculable:z,orient:"horizontal",left:"center",bottom:"0%",textStyle:{color:s.colors["base-content-muted"]},handleStyle:{borderColor:s.colors["base-100"]},inRange:{color:a},text:z?void 0:[de(Ke,Ee),de(ze,Ee)],formatter(b){return de(b,Ee)}},series:[{type:"heatmap",data:$e,label:{show:V,formatter(b){return b.value[2]===0?Ye:de(b.value[2],Ee)}},labelLayout:{hideOverlap:!0},itemStyle:{borderColor:s.colors["base-300"],borderWidth:ne?.5:0}}],media:[{query:{maxWidth:400},option:{series:{label:{show:M}}}},{query:{minWidth:400},option:{series:{label:{show:V}}}}]})}catch(b){if(t(10,tt=b.message),console.error("Error in Heatmap: "+b.message),Ei)throw tt}l.$$.dirty[0]&6145},t(12,r=void 0),t(51,n=void 0),[c,U,Ve,We,y,X,me,Ce,ft,ut,tt,ct,r,i,h,V,M,H,O,ne,G,z,F,k,K,Re,_,u,E,T,v,N,B,q,S,j,C,$,he,se,Ze,Je,Ye,xe,je,$e,et,Ee,Me,ze,Ke,n,s,a]}class Pl extends _e{constructor(e){super(),be(this,e,Ul,Rl,ge,{data:0,queryID:4,x:26,y:27,xSort:28,xSortOrder:29,ySort:30,ySortOrder:31,value:32,valueFmt:33,valueLabels:15,mobileValueLabels:16,xAxisPosition:34,xTickMarks:17,yTickMarks:18,title:5,subtitle:35,borders:19,legend:20,filter:21,colorPalette:36,colorScale:37,min:22,max:23,chartAreaHeight:24,xLabelRotation:38,echartsOptions:6,seriesOptions:7,printEchartsConfig:1,leftPadding:39,rightPadding:40,cellHeight:41,renderer:8,downloadableData:2,downloadableImage:3,connectGroup:9,nullsZero:25,zeroDisplay:42},null,[-1,-1])}}function Hl(l){let e;const t=l[6].default,i=ii(t,l,l[7],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,n){i&&i.m(r,n),e=!0},p(r,n){i&&i.p&&(!e||n&128)&&li(i,t,r,r[7],e?ni(t,r[7],n,null):ri(r[7]),null)},i(r){e||(R(i,r),e=!0)},o(r){P(i,r),e=!1},d(r){i&&i.d(r)}}}function Bl(l){let e,t;const i=[l[4],{data:rt.isQuery(l[10])?Array.from(l[10]):l[10]},{queryID:l[5]}];let r={$$slots:{default:[Hl]},$$scope:{ctx:l}};for(let n=0;n<i.length;n+=1)r=Pe(r,i[n]);return e=new Pl({props:r}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,s){ie(e,n,s),t=!0},p(n,s){const a=s&1072?yi(i,[s&16&&Oi(n[4]),s&1024&&{data:rt.isQuery(n[10])?Array.from(n[10]):n[10]},s&32&&{queryID:n[5]}]):{};s&128&&(a.$$scope={dirty:s,ctx:n}),e.$set(a)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function ql(l){let e,t;return e=new Ti({props:{slot:"empty",emptyMessage:l[2],emptySet:l[1],chartType:zt,isInitial:l[3]}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r&4&&(n.emptyMessage=i[2]),r&2&&(n.emptySet=i[1]),r&8&&(n.isInitial=i[3]),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Gl(l){let e,t;return e=new Vt({props:{slot:"error",title:zt,error:l[10].error.message}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,r){const n={};r&1024&&(n.error=i[10].error.message),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Fl(l){let e,t;return e=new pi({props:{data:l[0],$$slots:{error:[Gl,({loaded:i})=>({10:i}),({loaded:i})=>i?1024:0],empty:[ql],default:[Bl,({loaded:i})=>({10:i}),({loaded:i})=>i?1024:0]},$$scope:{ctx:l}}}),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ie(e,i,r),t=!0},p(i,[r]){const n={};r&1&&(n.data=i[0]),r&1182&&(n.$$scope={dirty:r,ctx:i}),e.$set(n)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}let zt="Heatmap";function Vl(l,e,t){let i,{$$slots:r={},$$scope:n}=e,{data:s}=e;const a=rt.isQuery(s)?s.hash:void 0;let o=(s==null?void 0:s.hash)===a,{emptySet:f=void 0}=e,{emptyMessage:h=void 0}=e,d=s==null?void 0:s.id;return l.$$set=c=>{t(9,e=Pe(Pe({},e),lt(c))),"data"in c&&t(0,s=c.data),"emptySet"in c&&t(1,f=c.emptySet),"emptyMessage"in c&&t(2,h=c.emptyMessage),"$$scope"in c&&t(7,n=c.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&t(3,o=(s==null?void 0:s.hash)===a),t(4,i=Object.fromEntries(Object.entries(e).filter(([,c])=>c!==void 0)))},e=lt(e),[s,f,h,o,i,d,r,n]}class Ql extends _e{constructor(e){super(),be(this,e,Vl,Fl,ge,{data:0,emptySet:1,emptyMessage:2})}}export{Sl as E,Ql as H,Xl as Q,Qe as a,Al as g,Ai as r};
